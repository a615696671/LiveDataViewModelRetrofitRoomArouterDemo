webpackJsonp([30],{591:function(n,e,t){"use strict";function l(n){return s._19(0,[(n()(),s.Z(0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null))],null,function(n,e){n(e,0,0,s._3(1,"",e.parent.context.$implicit.image,""))})}function i(n){return s._19(0,[(n()(),s.Z(0,null,null,8,"ion-col",[["class","col"],["tappable",""],["width-33",""]],null,[[null,"click"]],function(n,e,t){var l=!0;if("click"===e){l=!1!==n.component.toPage(n.context.$implicit,n.context.index)&&l}return l},null,null)),s.Y(16384,null,0,w.a,[],null,null),(n()(),s._18(null,["\n                    "])),(n()(),s.V(16777216,null,null,1,null,l)),s.Y(16384,null,0,y.h,[s.J,s.G],{ngIf:[0,"ngIf"]},null),(n()(),s._18(null,["\n                    "])),(n()(),s.Z(0,null,null,1,"div",[],null,null,null,null,null)),(n()(),s._18(null,["",""])),(n()(),s._18(null,["\n                "]))],function(n,e){n(e,4,0,null!=e.context.$implicit.name)},function(n,e){n(e,7,0,e.context.$implicit.name)})}function a(n){return s._19(0,[(n()(),s.Z(0,null,null,5,"ion-row",[["class","row"]],null,null,null,null,null)),s.Y(16384,null,0,Y.a,[],null,null),(n()(),s._18(null,["\n                "])),(n()(),s.V(16777216,null,null,1,null,i)),s.Y(802816,null,0,y.g,[s.J,s.G,s.p],{ngForOf:[0,"ngForOf"]},null),(n()(),s._18(null,["\n            "]))],function(n,e){n(e,4,0,e.context.$implicit)},null)}function o(n){return s._19(0,[(n()(),s.Z(0,null,null,10,"ion-grid",[["class","grid"]],null,null,null,null,null)),s.Y(16384,null,0,M.a,[],null,null),(n()(),s._18(null,["\n        "])),(n()(),s._18(null,["\n        "])),(n()(),s.Z(0,null,null,5,"ion-grid",[["class","grid"]],null,null,null,null,null)),s.Y(16384,null,0,M.a,[],null,null),(n()(),s._18(null,["\n            "])),(n()(),s.V(16777216,null,null,1,null,a)),s.Y(802816,null,0,y.g,[s.J,s.G,s.p],{ngForOf:[0,"ngForOf"]},null),(n()(),s._18(null,["\n        "])),(n()(),s._18(null,["\n    "]))],function(n,e){n(e,8,0,e.component.orderTasksArray)},null)}function r(n){return s._19(0,[(n()(),s._18(null,["\n"])),(n()(),s.Z(0,null,null,15,"ion-header",[],null,null,null,null,null)),s.Y(16384,null,0,C.a,[U.a,s.j,s.B,[2,R.a]],null,null),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n\n    "])),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n    "])),(n()(),s._18(null,["\n\n"])),(n()(),s._18(null,["\n\n\n"])),(n()(),s.Z(0,null,null,5,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,A.b,A.a)),s.Y(4374528,null,0,L.a,[U.a,x.a,F.a,s.j,s.B,H.a,Z.a,s.v,[2,R.a],[2,B.a]],null,null),(n()(),s._18(1,["\n    "])),(n()(),s.V(16777216,null,1,1,null,o)),s.Y(16384,null,0,y.h,[s.J,s.G],{ngIf:[0,"ngIf"]},null),(n()(),s._18(1,["\n"])),(n()(),s._18(null,["\n"]))],function(n,e){n(e,22,0,e.component.isShow)},function(n,e){n(e,18,0,s._12(e,19).statusbarPadding,s._12(e,19)._hasRefresher)})}Object.defineProperty(e,"__esModule",{value:!0});var s=t(1),u=(t(0),t(39),t(47)),_=t(79),c=t(110),d=h=function(){function n(){}return n.setRoleData=function(){h.rmb[c.a]={menu:h.PENDING_MENU_ID+","+h.ON_WAY_MENU_LIST_ID+","+h.DISBURDEN_ID+","+h.RETURN_UPLOAD_INFO_MENU_ID+","+h.TASK_DISPOSE_ID+","+h.WORK_QUERY+","+h.SUGGESTION_ID+","+h.SIGN_ID+","+h.NOTICE_ID},h.rmb[c.g]={menu:h.SCAN_TRANSFER_ID+","+h.UNLOAD_RECEIPT_MENU_ID+","+h.NOTICE_ID}},n.getMenu=function(n){this.setRoleData();var e="",t=this.rmb[n];return _.a.isNotEmpty(t)?e=_.a.isNotEmpty(this.defaultRmb.menu)?this.defaultRmb.menu+","+t.menu:t.menu:_.a.isNotEmpty(this.defaultRmb.menu)&&(e=this.defaultRmb.menu),e},n.getMenuList=function(n,e){for(var t=this.getMenu(e),l=[],i=0;i<n.length;i++){t.indexOf(n[i].id)>=0&&l.push(n[i])}return l},n}();d.PENDING_MENU_ID="00200400000",d.ON_WAY_MENU_LIST_ID="00201000000",d.UNLOAD_RECEIPT_MENU_ID="00200600000",d.RETURN_UPLOAD_INFO_MENU_ID="00200800000",d.SCAN_TRANSFER_ID="9900000002",d.TASK_DISPOSE_ID="9900000003",d.DISBURDEN_ID="9900000004",d.WORK_QUERY="9900000006",d.SUGGESTION_ID="9900000007",d.SIGN_ID="9900000008",d.NOTICE_ID="9900000009",d.EXCEPTION_QUERY="900010001",d.ON_WAY_QUERY="900010002",d.UN_LOAD="900010003",d.CODE_QUEE="900010004",d.DISPICH_BYCAR="900010005",d.DISPICH_ORDER="900010006",d.defaultRmb={},d.rmb=[];var h,g=t(166),p=t(112),m=function(){function n(n,e,t,l,i,a,o){this.cd=n,this.navCtrl=e,this.navParams=t,this.nativeService=l,this.http=i,this.elementRef=a,this.zone=o,this.isShow=!0,this.orderTasksArray=[],this.indexZero=0,this.indexOne=0,this.indexTwo=0,this.indexThree=0,this.indexFour=0,this.indexFive=0,this.indexSix=0,this.indexSeven=0,this.indexEight=0,this.indexNine=0,this.interval=null}return n.prototype.ionViewDidLoad=function(){this.indexOne=0,console.log(_.a.dateFormat(new Date,"YYYY-MM-DDTHH:mm:ssTZD")+"==>order-task(didLoad)"),this.getUser()},n.prototype.ionViewDidEnter=function(){console.log("time===>data",_.a.dateFormat(new Date,"yyyy-MM-dd HH:mm:ss")),console.log("time===>data",_.a.dateFormat(new Date,"yyyy-MM-dd hh:mm:ss"));_.a.queryElement(this.elementRef.nativeElement,".scroll-content").setAttribute("style","margin-top:56px")},n.prototype.ionViewWillUnload=function(){localStorage.setItem("token",""),console.log("6.0 ionViewWillUnload 当页面将要销毁同时页面上元素移除时触发")},n.prototype.getUser=function(){var n=this;document.addEventListener("deviceready",function(){console.log(_.a.dateFormat(new Date,"YYYY-MM-DDTHH:mm:ssTZD")+"==>order-task(getUser开始1)"),n.login()},!1),console.log(_.a.dateFormat(new Date,"YYYY-MM-DDTHH:mm:ssTZD")+"==>order-task(getUser开始)")},n.prototype.drawNine=function(){for(var n=0,e=0;e<this.orderTasks.length;e++)e%3==0&&(this.orderTasksArray[n=e/3]=new Array),this.orderTasksArray[n][e%3]=this.orderTasks[e];this.orderTasks.length%3!=0&&(this.orderTasks.length%3==1?(this.orderTasksArray[n][1]={},this.orderTasksArray[n][2]={}):this.orderTasks.length%3==2&&(this.orderTasksArray[n][2]={})),console.log(_.a.dateFormat(new Date,"YYYY-MM-DDTHH:mm:ssTZD")+"==>order-task(开始登录)")},n.prototype.toPage=function(n,e){if("{}"!==JSON.stringify(n))switch(e){case 0:this.breakToPage(this.indexZero,n.url,n.type,n.isClick);break;case 1:this.breakToPage(this.indexOne,n.url,n.type,n.isClick);break;case 2:this.breakToPage(this.indexTwo,n.url,n.type,n.isClick);break;case 3:this.breakToPage(this.indexThree,n.url,n.type,n.isClick);break;case 4:this.breakToPage(this.indexFour,n.url,n.type,n.isClick);break;case 5:this.breakToPage(this.indexFive,n.url,n.type,n.isClick)}},n.prototype.breakToPage=function(n,e,t,l){l?0==n&&(n++,this.navCtrl.push(e,{type:t}),this.interval=setInterval(function(){n=0},2e3),clearInterval(this.interval)):this.nativeService.showToast("请申请权限菜单!",2e3,"top")},n.prototype.login=function(){var n=this;p.a.getUserCordova(function(e){var t=JSON.parse(JSON.stringify(e));n.http.yutong_sendHttpPostWithServerHeader(c.f.getUserToken,n.http.handleParamString(t.uid+"")).subscribe(function(e){if(null!=e)if(e.isSuccess){n.http.yutong_sendHttpPostWithServerHeader(c.f.AppUserLogin,n.http.handleParam({staffNo:e.data})).subscribe(function(e){null!=e&&(e.isSuccess?(localStorage.setItem("token",e.data),e.data.name=e.data.esusLoginName,e.data.nameStr=e.data.esusUserNameCn,localStorage.setItem("userInfo",JSON.stringify(e.data)),n.nativeService.hideLoading(),console.log(_.a.dateFormat(new Date,"YYYY-MM-DDTHH:mm:ssTZD")+"==>order-task(结束登录)"),{userLogin:e.data.esusLoginName,captcha:"",systemLanguage:"zh_CN",loginModel:"2",planformType:"Android"},n.showOrderTask(e)):(n.isShow=!1,n.nativeService.showToast(e.message,3e3,"top")))},function(e){n.isShow=!1,n.nativeService.hideLoading(),n.nativeService.httpErrorAlert(e,"")})}else n.isShow=!1,n.nativeService.showToast(e.message,3e3,"top")},function(e){n.nativeService.showToast("token获取失败",3e3,"top"),n.isShow=!1,n.nativeService.hideLoading(),n.nativeService.httpErrorAlert(e,"")})},function(e){n.nativeService.showToast("获取掌上宇通用户信息失败!",3e3,"top")})},n.prototype.showOrderTask=function(n){var e=this;this.zone.run(function(){e.isShow=!0,e.orderTaskListInit();for(var t=0;t<e.orderTasks.length;t++)for(var l=0;l<n.data.esPermissionModelBeans.length;l++)e.orderTasks[t].id==n.data.esPermissionModelBeans[l].permissionCode&&(e.orderTasks[t].isClick=!0);e.drawNine()})},n.prototype.orderTaskListInit=function(){this.orderTasks=[{id:d.EXCEPTION_QUERY,name:"异常查询",url:"ExceptionQueryPage",image:"assets/img/ordertask/icon-yichangchaxun.png",type:"",isClick:!1},{id:d.ON_WAY_QUERY,name:"在途查询",url:"OnTheWayFeedbackListPage",image:"assets/img/ordertask/icon-zaituchaxun.png",type:"",isClick:!1},{id:d.UN_LOAD,name:"卸货签收",url:"UnloadingDeclarationnPage",image:"assets/img/ordertask/xiehuoqianshou.png",type:"",isClick:!1},{id:d.CODE_QUEE,name:"扫码排队",url:"ScanCodeQueuePage",image:"assets/img/ordertask/saomapaidui.png",type:"",isClick:!1},{id:d.DISPICH_BYCAR,name:"叫车发运",url:"DispatchByCarListPage",image:"assets/img/ordertask/icon-jiaochefayun.png",type:"",isClick:!1},{id:d.DISPICH_ORDER,name:"订单分配",url:"OrderAllocationPage",image:"assets/img/ordertask/icon-dingdanfenpei.png",type:"",isClick:!1}]},n}(),f=function(){return function(){}}(),y=t(18),D=t(24),T=t(109),k=t(169),I=t(170),N=t(171),v=t(172),E=t(173),O=t(174),S=t(175),b=t(176),P=t(177),w=t(180),Y=t(179),M=t(194),C=t(181),U=t(3),R=t(7),A=t(178),L=t(32),x=t(6),F=t(13),H=t(12),Z=t(33),B=t(28),G=t(14),W=s.X({encapsulation:2,styles:[],data:{}}),j=s.W("page-order-task",m,function(n){return s._19(0,[(n()(),s.Z(0,null,null,1,"page-order-task",[],null,null,null,r,W)),s.Y(49152,null,0,m,[s.g,B.a,G.a,u.a,g.a,s.j,s.v],null,null)],null,null)},{},{},[]),Q=t(48);t.d(e,"OrderTaskPageModuleNgFactory",function(){return J});var z=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])};return function(e,t){function l(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(l.prototype=t.prototype,new l)}}(),J=new s.s(function(n){function e(e){return n.call(this,e,[k.a,I.a,N.a,v.a,E.a,O.a,S.a,b.a,P.a,j],[])||this}return z(e,n),Object.defineProperty(e.prototype,"_NgLocalization_7",{get:function(){return null==this.__NgLocalization_7&&(this.__NgLocalization_7=new y.i(this.parent.get(s.r))),this.__NgLocalization_7},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_ɵi_8",{get:function(){return null==this.__ɵi_8&&(this.__ɵi_8=new D.n),this.__ɵi_8},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_FormBuilder_9",{get:function(){return null==this.__FormBuilder_9&&(this.__FormBuilder_9=new D.c),this.__FormBuilder_9},enumerable:!0,configurable:!0}),e.prototype.createInternal=function(){return this._CommonModule_0=new y.b,this._ɵba_1=new D.m,this._FormsModule_2=new D.d,this._ReactiveFormsModule_3=new D.l,this._IonicModule_4=new T.a,this._IonicPageModule_5=new T.b,this._OrderTaskPageModule_6=new f,this._LAZY_LOADED_TOKEN_10=m,this._OrderTaskPageModule_6},e.prototype.getInternal=function(n,e){return n===y.b?this._CommonModule_0:n===D.m?this._ɵba_1:n===D.d?this._FormsModule_2:n===D.l?this._ReactiveFormsModule_3:n===T.a?this._IonicModule_4:n===T.b?this._IonicPageModule_5:n===f?this._OrderTaskPageModule_6:n===y.j?this._NgLocalization_7:n===D.n?this._ɵi_8:n===D.c?this._FormBuilder_9:n===Q.a?this._LAZY_LOADED_TOKEN_10:e},e.prototype.destroyInternal=function(){},e}(s.U),f)}});